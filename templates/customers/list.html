{% extends 'dashboard_base.html' %}
{% load static %}

{% block title %}Customers - ShopCloud{% endblock %}

{% block dashboard_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
<style>
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    background: #FFFFFF;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 1px 6px rgba(15, 23, 42, 0.06);
}

.page-header h1 {
    margin: 0;
    font-size: 1.8rem;
    color: #1f2937;
    font-weight: 700;
}

.customers-table {
    background: #FFFFFF;
    border-radius: 15px;
    box-shadow: 0 1px 6px rgba(15, 23, 42, 0.06);
    overflow: hidden;
}

.table {
    margin: 0;
}

.table th {
    background: #f8fafc;
    border: none;
    padding: 15px;
    font-weight: 600;
    color: #1f2937;
}

.table td {
    padding: 15px;
    border-top: 1px solid #e5e7eb;
    vertical-align: middle;
}

.customer-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.customer-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #4A6CF7;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
}

.customer-details h6 {
    margin: 0;
    font-weight: 600;
    color: #1f2937;
}

.customer-details small {
    color: #6b7280;
}

.badge {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
}

.badge-success {
    background: #dcfce7;
    color: #166534;
}

.badge-warning {
    background: #fef3c7;
    color: #92400e;
}

.btn-group .btn {
    padding: 6px 12px;
    font-size: 0.875rem;
}
</style>
{% endblock %}

{% block dashboard_content %}
<div class="page-header">
    <h1>Customers</h1>
    <div>
        <a href="{% url 'customers:add' %}" class="btn btn-primary">+ Add Customer</a>
        <a href="{% url 'customers:list_ur' %}" class="btn btn-secondary">اردو</a>
    </div>
</div>

<div class="customers-table">
    <table class="table">
        <thead>
            <tr>
                <th>Customer</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Address</th>
                <th>Total Bills</th>
                <th>Total Spent</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for customer in customers %}
            <tr>
                <td>
                    <div class="customer-info">
                        <div class="customer-avatar">
                            {{ customer.name|first|upper }}
                        </div>
                        <div class="customer-details">
                            <h6>{{ customer.name }}</h6>
                            <small>ID: #{{ customer.id }}</small>
                        </div>
                    </div>
                </td>
                <td>{{ customer.phone|default:"-" }}</td>
                <td>{{ customer.email|default:"-" }}</td>
                <td>{{ customer.address|default:"-"|truncatechars:30 }}</td>
                <td>{{ customer.total_bills|default:0 }}</td>
                <td>Rs. {{ customer.total_spent|default:0|floatformat:0 }}</td>
                <td>
                    <div class="btn-group">
                        <a href="{% url 'customers:detail' customer.id %}" class="btn btn-outline-primary btn-sm">View Details</a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center py-4">
                    <p class="text-muted">No customers found. <a href="{% url 'customers:add' %}">Add your first customer</a></p>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}